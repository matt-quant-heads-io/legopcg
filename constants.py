import os

from gym_envs.gym_pcgrl.envs.probs.zelda_prob import ZeldaProblem


PROJECT_ROOT = os.environ["PROJECT_ROOT"]

# ###################   ZELDA CONSTANTS   ##############################

ZELDA_DATA_ROOT = os.environ["ZELDA_DATA_ROOT"]
ZELDA_GOAL_MAPS_PATH = os.environ["ZELDA_GOAL_MAPS_PATH"]
DOMAIN_VARS_ZELDA = {
    "tiles_map": {
        "g": "door",
        "+": "key",
        "A": "player",
        "1": "bat",
        "2": "spider",
        "3": "scorpion",
        "w": "solid",
        ".": "empty",
    },
    "int_map": {
        "empty": 0,
        "solid": 1,
        "player": 2,
        "key": 3,
        "door": 4,
        "bat": 5,
        "scorpion": 6,
        "spider": 7,
    },
    "char_map": {
        "door": "a",
        "key": "b",
        "player": "c",
        "bat": "d",
        "spider": "e",
        "scorpion": "f",
        "solid": "g",
        "empty": "h",
    },
    "goal_maps_filepath": "data/zelda/goal_maps/zelda_lvl{}.txt",
    "env_y": 7,
    "env_x": 11,
    "env_z": None,
    "action_space_size": 8,
    "action_pronbabilities_map": {
        0: 0.58,
        1: 0.3,
        2: 0.02,
        3: 0.02,
        4: 0.02,
        5: 0.02,
        6: 0.02,
        7: 0.02,
    },
    "gym_env_name": "zelda-narrow-v0",
    "prob": ZeldaProblem,
    "sweep_params": [
        ("obs_sizes", [1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21]),
        ("goal_set_sizes", [1, 10, 20, 30, 40, 50]),
        (
            "trajectory_lengths",
            [
                int(7 * 11 * 0.05),
                int(7 * 11 * 0.25),
                int(7 * 11 * 0.5),
                int(7 * 11 * 0.75),
                int(7 * 11 * 1.0),
            ],
        ),
        (
            "training_dataset_sizes",
            [
                100_000,
                200_000,
                300_000,
                400_000,
                500_000,
                600_000,
                700_000,
                800_000,
                900_000,
                1_000_000,
            ],
        ),
    ],
    "trajectories_to_generate": [
        ("obs_sizes", [1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21]),
        ("goal_set_sizes", [1, 10, 20, 30, 40, 50]),
        (
            "trajectory_lengths",
            [
                int(7 * 11 * 0.05),
                int(7 * 11 * 0.25),
                int(7 * 11 * 0.5),
                int(7 * 11 * 0.75),
                int(7 * 11 * 1.0),
            ],
        ),
        (
            "training_dataset_sizes",
            [
                1_000_000,
            ],
        ),
    ],
}
TILES_MAP_ZELDA = DOMAIN_VARS_ZELDA["tiles_map"]
INT_MAP_ZELDA = DOMAIN_VARS_ZELDA["int_map"]

LEGO_DATA_ROOT = os.environ["LEGO_DATA_ROOT"]
LEGO_GOAL_MAPS_PATH = os.environ["LEGO_GOAL_MAPS_PATH"]
DOMAIN_VARS_LEGO = {
    "actions_map": {
        "recte4.dat": 0,
        "30602.dat": 1,
        "43719.dat": 2,
        "3021.dat": 3,
        "3710.dat": 4,
        "2412a.dat": 5,
        "44674.dat": 6,
        "4589.dat": 7,
        "4081a.dat": 8,
        "3795.dat": 9,
        "3022.dat": 10,
        "4600.dat": 11,
        "6014.dat": 12,
        "6015.dat": 13,
        "6157.dat": 14,
        "32028.dat": 15,
        "30027a.dat": 16,
        "30028.dat": 17,
        "51719.dat": 18,
        "51011.dat": 19,
        "50951.dat": 20,
        "2432.dat": 21,
        "48183.dat": 22,
        "2540.dat": 23,
        "3023.dat": 24,
        "50947.dat": 25,
        "3031.dat": 26,
        "3034.dat": 27,
        "54200.dat": 28,
        "6141.dat": 29,
        "3020.dat": 30,
        "30603.dat": 31,
        "41854.dat": 32,
        "3937.dat": 33,
        "3938.dat": 34,
        "2412b.dat": 35,
        "3839a.dat": 36,
    },
    "rev_actions_map": {
        0: "recte4.dat",
        1: "30602.dat",
        2: "43719.dat",
        3: "3021.dat",
        4: "3710.dat",
        5: "2412a.dat",
        6: "44674.dat",
        7: "4589.dat",
        8: "4081a.dat",
        9: "3795.dat",
        10: "3022.dat",
        11: "4600.dat",
        12: "6014.dat",
        13: "6015.dat",
        14: "6157.dat",
        15: "32028.dat",
        16: "30027a.dat",
        17: "30028.dat",
        18: "51719.dat",
        19: "51011.dat",
        20: "50951.dat",
        21: "2432.dat",
        22: "48183.dat",
        23: "2540.dat",
        24: "3023.dat",
        25: "50947.dat",
        26: "3031.dat",
        27: "3034.dat",
        28: "54200.dat",
        29: "6141.dat",
        30: "3020.dat",
        31: "30603.dat",
        32: "41854.dat",
        33: "3937.dat",
        34: "3938.dat",
        35: "2412b.dat",
        36: "3839a.dat",
    },
    "int_map": {
        0: "recte4.dat",
        1: "30602.dat",
        2: "43719.dat",
        3: "3021.dat",
        4: "3710.dat",
        5: "2412a.dat",
        6: "44674.dat",
        7: "4589.dat",
        8: "4081a.dat",
        9: "3795.dat",
        10: "3022.dat",
        11: "4600.dat",
        12: "6014.dat",
        13: "6015.dat",
        14: "6157.dat",
        15: "32028.dat",
        16: "30027a.dat",
        17: "30028.dat",
        18: "51719.dat",
        19: "51011.dat",
        20: "50951.dat",
        21: "2432.dat",
        22: "48183.dat",
        23: "2540.dat",
        24: "3023.dat",
        25: "50947.dat",
        26: "3031.dat",
        27: "3034.dat",
        28: "54200.dat",
        29: "6141.dat",
        30: "3020.dat",
        31: "30603.dat",
        32: "41854.dat",
        33: "3937.dat",
        34: "3938.dat",
        35: "2412b.dat",
        36: "3839a.dat",
    },
    "char_map": {},
    "goal_maps_filepath": "data/lego/goal_maps/{}.mpd",
    "env_y": 3,
    "env_x": 3,
    "env_z": 3,
    "action_space_size": 37,  # TODO: check these numbers
    "action_pronbabilities_map": {
        0: 0.55,
        1: 0.24,
        2: 0.1,
        3: 0.04,
        4: 0.03,
        5: 0.03,
        6: 0.005,
        7: 0.005,
    },
    "gym_env_name": None,
    "sweep_params": [
        ("obs_sizes", [1, 2, 3, 4, 5, 6]),
        ("goal_set_sizes", [1, 10, 20, 30, 40, 50]),
        (
            "trajectory_lengths",
            [
                int(3 * 3 * 3 * 0.05),
                int(3 * 3 * 3 * 0.25),
                int(3 * 3 * 3 * 0.5),
                int(3 * 3 * 3 * 0.75),
                int(3 * 3 * 3 * 1.0),
            ],
        ),
        (
            "training_dataset_sizes",
            [
                100_000,
                200_000,
                300_000,
                400_000,
                500_000,
                600_000,
                700_000,
                800_000,
                900_000,
                1_000_000,
            ],
        ),
    ],
}

ACTIONS_MAP_LEGO = DOMAIN_VARS_LEGO["actions_map"]
INT_MAP_LEGO = DOMAIN_VARS_LEGO["int_map"]
